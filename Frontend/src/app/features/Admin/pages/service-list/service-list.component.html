<div class="service-list">
  <h2>Service List</h2>

  <button type="button" class="add-btn" (click)="toggleAddForm()">
    {{ showAddForm ? 'Cancel' : '+ Add Service' }}
  </button>

  <!-- Add new service form -->
  <div *ngIf="showAddForm" class="add-form">
    <h3>Add New Service</h3>
    <div class="form-group">
      <input [(ngModel)]="newService.name" placeholder="Service Name" class="form-input" />
    </div>
    <div class="form-group">
      <input [(ngModel)]="newService.description" placeholder="Description" class="form-input" />
    </div>
    <div class="form-group">
      <input type="number" [(ngModel)]="newService.price" placeholder="Price" class="form-input" />
    </div>
    <div class="form-actions">
      <button type="button" class="save-btn" (click)="addService()">Save</button>
      <button type="button" class="cancel-btn" (click)="cancelAdd()">Cancel</button>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Loading services...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <table *ngIf="!loading && !error && services.length > 0" class="services-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Service Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let service of services; index as i" [class.editing]="editingServiceId === getServiceId(service)">
        <td>{{ i + 1 }}</td>

        <!-- Service Name Column -->
        <td *ngIf="editingServiceId !== getServiceId(service)">{{ service.name }}</td>
        <td *ngIf="editingServiceId === getServiceId(service)">
          <input [(ngModel)]="editingService.name" class="edit-input" />
        </td>

        <!-- Description Column -->
        <td *ngIf="editingServiceId !== getServiceId(service)">{{ service.description }}</td>
        <td *ngIf="editingServiceId === getServiceId(service)">
          <input [(ngModel)]="editingService.description" class="edit-input" />
        </td>

        <!-- Price Column -->
        <td *ngIf="editingServiceId !== getServiceId(service)">{{ service.price | currency }}</td>
        <td *ngIf="editingServiceId === getServiceId(service)">
          <input type="number" [(ngModel)]="editingService.price" class="edit-input" />
        </td>

        <!-- Actions Column -->
        <td>
          <!-- Normal Actions - Show Edit and Delete buttons -->
          <div *ngIf="editingServiceId !== getServiceId(service)" class="actions">
            <button type="button" class="action-btn edit-btn" (click)="editService(service)" title="Edit">
              <span class="icon">‚úèÔ∏è</span>
            </button>
            <button type="button" class="action-btn delete-btn" (click)="deleteService(service)" title="Delete">
              <span class="icon">üóëÔ∏è</span>
            </button>
          </div>

          <!-- Edit Mode Actions - Show Save and Cancel buttons -->
          <div *ngIf="editingServiceId === getServiceId(service)" class="actions">
            <button type="button" class="action-btn save-btn" (click)="saveService()" title="Save">
              <span class="icon">üíæ</span>
            </button>
            <button type="button" class="action-btn cancel-btn" (click)="cancelEdit()" title="Cancel">
              <span class="icon">‚úñ</span>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && !error && services.length === 0" class="no-services">
    No services available.
  </div>
</div>